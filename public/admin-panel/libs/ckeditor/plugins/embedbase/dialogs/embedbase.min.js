CKEDITOR.dialog.add("embedBase",function(editor){"use strict";var lang=editor.lang.embedbase;return{title:lang.title,minWidth:350,minHeight:50,onLoad:function(){var that=this,loadContentRequest=null;this.on("ok",function(evt){evt.data.hide=false;evt.stop();that.setState(CKEDITOR.DIALOG_STATE_BUSY);var url=that.getValueOf("info","url"),widget=that.getModel(editor);loadContentRequest=widget.loadContent(url,{noNotifications:true,callback:function(){if(!widget.isReady()){editor.widgets.finalizeCreation(widget.wrapper.getParent(true))}editor.fire("saveSnapshot");that.hide();unlock()},errorCallback:function(messageTypeOrMessage){that.getContentElement("info","url").select();alert(widget.getErrorMessage(messageTypeOrMessage,url,"Given"));unlock()}})},null,null,15);this.on("cancel",function(evt){if(evt.data.hide&&loadContentRequest){loadContentRequest.cancel();unlock()}});function unlock(){that.setState(CKEDITOR.DIALOG_STATE_IDLE);loadContentRequest=null}},contents:[{id:"info",elements:[{type:"text",id:"url",label:editor.lang.common.url,required:true,setup:function(widget){this.setValue(widget.data.url)},validate:function(){var widget=this.getDialog().getModel(editor);if(!widget.isUrlValid(this.getValue())){return lang.unsupportedUrlGiven}return true}}]}]}});